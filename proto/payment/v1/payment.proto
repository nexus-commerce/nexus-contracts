syntax = "proto3";

option go_package = "gen/v1/payment";

import "google/api/annotations.proto";
import "google/protobuf/struct.proto";

package payment.v1;

service PaymentService {
  rpc ProcessPayment(ProcessPaymentRequest) returns (ProcessPaymentResponse) {
    option (google.api.http) = {
      post: "/api/v1/payments"
      body: "*"
    };
  };
  rpc GetPayments(GetPaymentsRequest) returns (GetPaymentsResponse) {
    option (google.api.http) = {
      get: "/api/v1/payments"
    };
  };
}

message Payment {
  int64 id = 1;
  float amount = 2;
  Currency currency = 3;
  Status status = 4;
  google.protobuf.Value gateway_transaction_id = 5;
  PaymentMethod payment_method = 6;
  int64 order_id = 7;
}

message ProcessPaymentRequest {}

message ProcessPaymentResponse {
  string client_secret = 1;
  Payment payment = 2;
}

message GetPaymentsRequest {}

message GetPaymentsResponse {
  repeated Payment payments = 1;
}

enum Status {
  STATUS_UNSPECIFIED = 0;
  STATUS_PENDING = 1;
  STATUS_COMPLETED = 2;
  STATUS_FAILED = 3;
  STATUS_REFUNDED = 4;
}

enum PaymentMethod {
  PAYMENT_METHOD_UNSPECIFIED = 0;
  PAYMENT_METHOD_CARD = 1;
  PAYMENT_METHOD_ON_DELIVERY = 2;
}

enum Currency {
  CURRENCY_UNSPECIFIED = 0;
  CURRENCY_USD = 1;
}